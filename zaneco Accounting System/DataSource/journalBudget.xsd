<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="journalBudget" targetNamespace="http://tempuri.org/journalBudget.xsd" xmlns:mstns="http://tempuri.org/journalBudget.xsd" xmlns="http://tempuri.org/journalBudget.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:msprop="urn:schemas-microsoft-com:xml-msprop" attributeFormDefault="qualified" elementFormDefault="qualified">
  <xs:annotation>
    <xs:appinfo source="urn:schemas-microsoft-com:xml-msdatasource">
      <DataSource DefaultConnectionIndex="0" FunctionsComponentName="QueriesTableAdapter" Modifier="AutoLayout, AnsiClass, Class, Public" SchemaSerializationMode="IncludeSchema" xmlns="urn:schemas-microsoft-com:xml-msdatasource">
        <Connections>
          <Connection AppSettingsObjectName="Settings" AppSettingsPropertyName="zanecobudgetConnectionString" ConnectionStringObject="" IsAppSettingsProperty="true" Modifier="Assembly" Name="zanecobudgetConnectionString (Settings)" ParameterPrefix="@" PropertyReference="ApplicationSettings.zaneco_Accounting_System.Properties.Settings.GlobalReference.Default.zanecobudgetConnectionString" Provider="MySql.Data.MySqlClient" />
        </Connections>
        <Tables>
          <TableAdapter BaseClass="System.ComponentModel.Component" DataAccessorModifier="AutoLayout, AnsiClass, Class, Public" DataAccessorName="journalTableAdapter" GeneratorDataComponentClassName="journalTableAdapter" Name="journal" UserDataComponentName="journalTableAdapter">
            <MainSource>
              <DbSource ConnectionRef="zanecobudgetConnectionString (Settings)" DbObjectType="Unknown" FillMethodModifier="Public" FillMethodName="Fill" GenerateMethods="Both" GenerateShortCommands="false" GeneratorGetMethodName="GetData" GeneratorSourceName="Fill" GetMethodModifier="Public" GetMethodName="GetData" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="false" UserGetMethodName="GetData" UserSourceName="Fill">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>SELECT j.idjournal, j.accountcode, j.accountname, j.documentdate, j.documentnumber, j.credit, IFNULL(p.PCode, r.rvPCode) AS pCode, IFNULL(p.Name, r.rvName) AS pname, r.rvNumber, p.PONumber
FROM     journal j LEFT OUTER JOIN
                  po p ON p.PONumber = j.documentnumber LEFT OUTER JOIN
                  requisition r ON r.rvNumber = j.documentnumber
WHERE  (j.documentdate BETWEEN @fromdate AND @todate) AND (RIGHT(j.accountname, 5) = ' - GA') AND (j.documentnumber like @docnumber)</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="true" AutogeneratedName="fromdate" ColumnName="documentdate" DataSourceName="zanecobudget.journal" DataTypeServer="date" DbType="DateTime" Direction="Input" ParameterName="@fromdate" Precision="0" ProviderType="Date" Scale="0" Size="0" SourceColumn="documentdate" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="todate" ColumnName="documentdate" DataSourceName="zanecobudget.journal" DataTypeServer="date" DbType="DateTime" Direction="Input" ParameterName="@todate" Precision="0" ProviderType="Date" Scale="0" Size="0" SourceColumn="documentdate" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="docnumber" ColumnName="documentnumber" DataSourceName="zanecobudget.journal" DataTypeServer="varchar(20)(20)" DbType="String" Direction="Input" ParameterName="@docnumber" Precision="0" ProviderType="VarChar" Scale="0" Size="20" SourceColumn="documentnumber" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
            </MainSource>
            <Mappings>
              <Mapping SourceColumn="idjournal" DataSetColumn="idjournal" />
              <Mapping SourceColumn="accountcode" DataSetColumn="accountcode" />
              <Mapping SourceColumn="accountname" DataSetColumn="accountname" />
              <Mapping SourceColumn="documentdate" DataSetColumn="documentdate" />
              <Mapping SourceColumn="documentnumber" DataSetColumn="documentnumber" />
              <Mapping SourceColumn="credit" DataSetColumn="credit" />
              <Mapping SourceColumn="pCode" DataSetColumn="pCode" />
              <Mapping SourceColumn="pname" DataSetColumn="pname" />
              <Mapping SourceColumn="rvNumber" DataSetColumn="rvNumber" />
              <Mapping SourceColumn="PONumber" DataSetColumn="PONumber" />
            </Mappings>
            <Sources />
          </TableAdapter>
          <TableAdapter BaseClass="System.ComponentModel.Component" DataAccessorModifier="AutoLayout, AnsiClass, Class, Public" DataAccessorName="journalQtmpTableAdapter" GeneratorDataComponentClassName="journalQtmpTableAdapter" Name="journalQtmp" UserDataComponentName="journalQtmpTableAdapter">
            <MainSource>
              <DbSource ConnectionRef="zanecobudgetConnectionString (Settings)" DbObjectName="" DbObjectType="Unknown" FillMethodModifier="Public" FillMethodName="Fill" GenerateMethods="Both" GenerateShortCommands="false" GeneratorGetMethodName="GetData" GeneratorSourceName="Fill" GetMethodModifier="Public" GetMethodName="GetData" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="false" UserGetMethodName="GetData" UserSourceName="Fill">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>Select 
            
  ja.*
           
from
           
 (
  Select 
            
       IFNULL(a.docnumber,IFNULL(c.refnumber,NULL)) docno,
             
       IF(a.docnumber is not NULL,'APV',IF(c.refnumber is not NULL,'CV','')) doc,
     
       fnl.*
            
   from
  
   (
 Select 
            
         f.*,
           
         if(doctype = 'RV',
         r.idrequisition,p.idpo) identry,
           
         r.rvdate,
            
         r.rvpcode pcode,
           
         r.rvname pname,
            
         r.rvdescription
            
        from
            
        (
 SELECT 
            
               j.documentdate approveddate,
            
              if(j.documenttype ='RV','RV','PO') doctype,
            
              if(j.documenttype ='RV',j.documentnumber,j.documenttype) rvnumber,
           
              j.documentnumber,
           
              j.credit amountApprove

           
        FROM zanecobudget.journal j
             
                   where j.documentdate between '2018-01-04'  and '2018-01-30' 
            
        group by j.documentnumber
             
        order by j.idjournal desc 
             ) f
            
        left join zanecobudget.requisition r on r.rvnumber=f.rvnumber
            
       left join zanecobudget.po p on p.ponumber = f.documentnumber 
            
   ) fnl
            
   left join zanecoaccounting.checkvoucher c on c.refnumber=fnl.documentnumber
             
   left join zanecoaccounting.apvoucher a on a.docnumber = fnl.documentnumber
        ) ja
 where ja.docno is null</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="true" AutogeneratedName="fromdate" ColumnName="documentdate" DataSourceName="" DataTypeServer="date" DbType="DateTime" Direction="Input" ParameterName="@fromdate" Precision="0" ProviderType="Date" Scale="0" Size="0" SourceColumn="documentdate" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="todate" ColumnName="documentdate" DataSourceName="" DataTypeServer="date" DbType="DateTime" Direction="Input" ParameterName="@todate" Precision="0" ProviderType="Date" Scale="0" Size="0" SourceColumn="documentdate" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="docnumber" ColumnName="documentnumber" DataSourceName="" DataTypeServer="varchar(20)(20)" DbType="String" Direction="Input" ParameterName="@docnumber" Precision="0" ProviderType="VarChar" Scale="0" Size="20" SourceColumn="documentnumber" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
            </MainSource>
            <Mappings />
            <Sources />
          </TableAdapter>
        </Tables>
        <Sources />
      </DataSource>
    </xs:appinfo>
  </xs:annotation>
  <xs:element name="journalBudget" msdata:IsDataSet="true" msdata:UseCurrentLocale="true" msprop:EnableTableAdapterManager="true" msprop:Generator_DataSetName="journalBudget" msprop:Generator_UserDSName="journalBudget">
    <xs:complexType>
      <xs:choice minOccurs="0" maxOccurs="unbounded">
        <xs:element name="journal" msprop:Generator_TableClassName="journalDataTable" msprop:Generator_TableVarName="tablejournal" msprop:Generator_TablePropName="journal" msprop:Generator_RowDeletingName="journalRowDeleting" msprop:Generator_RowChangingName="journalRowChanging" msprop:Generator_RowEvHandlerName="journalRowChangeEventHandler" msprop:Generator_RowDeletedName="journalRowDeleted" msprop:Generator_UserTableName="journal" msprop:Generator_RowChangedName="journalRowChanged" msprop:Generator_RowEvArgName="journalRowChangeEvent" msprop:Generator_RowClassName="journalRow">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="idjournal" msprop:Generator_ColumnVarNameInTable="columnidjournal" msprop:Generator_ColumnPropNameInRow="idjournal" msprop:Generator_ColumnPropNameInTable="idjournalColumn" msprop:Generator_UserColumnName="idjournal" type="xs:unsignedInt" />
              <xs:element name="accountcode" msprop:Generator_ColumnVarNameInTable="columnaccountcode" msprop:Generator_ColumnPropNameInRow="accountcode" msprop:Generator_ColumnPropNameInTable="accountcodeColumn" msprop:Generator_UserColumnName="accountcode" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="20" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="accountname" msprop:Generator_ColumnVarNameInTable="columnaccountname" msprop:Generator_ColumnPropNameInRow="accountname" msprop:Generator_ColumnPropNameInTable="accountnameColumn" msprop:Generator_UserColumnName="accountname" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="50" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="documentdate" msprop:Generator_ColumnVarNameInTable="columndocumentdate" msprop:Generator_ColumnPropNameInRow="documentdate" msprop:Generator_ColumnPropNameInTable="documentdateColumn" msprop:Generator_UserColumnName="documentdate" type="xs:dateTime" minOccurs="0" />
              <xs:element name="documentnumber" msprop:Generator_ColumnVarNameInTable="columndocumentnumber" msprop:Generator_ColumnPropNameInRow="documentnumber" msprop:Generator_ColumnPropNameInTable="documentnumberColumn" msprop:Generator_UserColumnName="documentnumber" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="20" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="credit" msprop:Generator_ColumnVarNameInTable="columncredit" msprop:Generator_ColumnPropNameInRow="credit" msprop:Generator_ColumnPropNameInTable="creditColumn" msprop:Generator_UserColumnName="credit" type="xs:double" minOccurs="0" />
              <xs:element name="pCode" msprop:Generator_ColumnVarNameInTable="columnpCode" msprop:Generator_ColumnPropNameInRow="pCode" msprop:Generator_ColumnPropNameInTable="pCodeColumn" msprop:Generator_UserColumnName="pCode" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="40" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="pname" msprop:Generator_ColumnVarNameInTable="columnpname" msprop:Generator_ColumnPropNameInRow="pname" msprop:Generator_ColumnPropNameInTable="pnameColumn" msprop:Generator_UserColumnName="pname" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="50" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="rvNumber" msprop:Generator_ColumnVarNameInTable="columnrvNumber" msprop:Generator_ColumnPropNameInRow="rvNumber" msprop:Generator_ColumnPropNameInTable="rvNumberColumn" msprop:Generator_UserColumnName="rvNumber" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="20" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="PONumber" msprop:Generator_ColumnVarNameInTable="columnPONumber" msprop:Generator_ColumnPropNameInRow="PONumber" msprop:Generator_ColumnPropNameInTable="PONumberColumn" msprop:Generator_UserColumnName="PONumber" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="15" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="journalQtmp" msprop:Generator_TableClassName="journalQtmpDataTable" msprop:Generator_TableVarName="tablejournalQtmp" msprop:Generator_RowChangedName="journalQtmpRowChanged" msprop:Generator_TablePropName="journalQtmp" msprop:Generator_RowDeletingName="journalQtmpRowDeleting" msprop:Generator_RowChangingName="journalQtmpRowChanging" msprop:Generator_RowEvHandlerName="journalQtmpRowChangeEventHandler" msprop:Generator_RowDeletedName="journalQtmpRowDeleted" msprop:Generator_RowClassName="journalQtmpRow" msprop:Generator_UserTableName="journalQtmp" msprop:Generator_RowEvArgName="journalQtmpRowChangeEvent">
          <xs:complexType>
          </xs:complexType>
        </xs:element>
        <xs:element name="journalQ" msprop:Generator_TableClassName="journalQDataTable" msprop:Generator_TableVarName="tablejournalQ" msprop:Generator_RowChangedName="journalQRowChanged" msprop:Generator_TablePropName="journalQ" msprop:Generator_RowDeletingName="journalQRowDeleting" msprop:Generator_RowChangingName="journalQRowChanging" msprop:Generator_RowEvHandlerName="journalQRowChangeEventHandler" msprop:Generator_RowDeletedName="journalQRowDeleted" msprop:Generator_RowClassName="journalQRow" msprop:Generator_UserTableName="journalQ" msprop:Generator_RowEvArgName="journalQRowChangeEvent">
          <xs:complexType>
          </xs:complexType>
        </xs:element>
        <xs:element name="journalapproved" msprop:Generator_TableClassName="journalapprovedDataTable" msprop:Generator_TableVarName="tablejournalapproved" msprop:Generator_RowChangedName="journalapprovedRowChanged" msprop:Generator_TablePropName="journalapproved" msprop:Generator_RowDeletingName="journalapprovedRowDeleting" msprop:Generator_RowChangingName="journalapprovedRowChanging" msprop:Generator_RowEvHandlerName="journalapprovedRowChangeEventHandler" msprop:Generator_RowDeletedName="journalapprovedRowDeleted" msprop:Generator_RowClassName="journalapprovedRow" msprop:Generator_UserTableName="journalapproved" msprop:Generator_RowEvArgName="journalapprovedRowChangeEvent">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="docno" msprop:Generator_ColumnVarNameInTable="columndocno" msprop:Generator_ColumnPropNameInRow="docno" msprop:Generator_ColumnPropNameInTable="docnoColumn" msprop:Generator_UserColumnName="docno" type="xs:string" minOccurs="0" />
              <xs:element name="doc" msprop:Generator_ColumnVarNameInTable="columndoc" msprop:Generator_ColumnPropNameInRow="doc" msprop:Generator_ColumnPropNameInTable="docColumn" msprop:Generator_UserColumnName="doc" type="xs:string" minOccurs="0" />
              <xs:element name="approveddate" msprop:Generator_ColumnVarNameInTable="columnapproveddate" msprop:Generator_ColumnPropNameInRow="approveddate" msprop:Generator_ColumnPropNameInTable="approveddateColumn" msprop:Generator_UserColumnName="approveddate" type="xs:string" minOccurs="0" />
              <xs:element name="doctype" msprop:Generator_ColumnVarNameInTable="columndoctype" msprop:Generator_ColumnPropNameInRow="doctype" msprop:Generator_ColumnPropNameInTable="doctypeColumn" msprop:Generator_UserColumnName="doctype" type="xs:string" minOccurs="0" />
              <xs:element name="rvnumber" msprop:Generator_ColumnVarNameInTable="columnrvnumber" msprop:Generator_ColumnPropNameInRow="rvnumber" msprop:Generator_ColumnPropNameInTable="rvnumberColumn" msprop:Generator_UserColumnName="rvnumber" type="xs:string" minOccurs="0" />
              <xs:element name="documentnumber" msprop:Generator_ColumnVarNameInTable="columndocumentnumber" msprop:Generator_ColumnPropNameInRow="documentnumber" msprop:Generator_ColumnPropNameInTable="documentnumberColumn" msprop:Generator_UserColumnName="documentnumber" type="xs:string" minOccurs="0" />
              <xs:element name="amountApprove" msprop:Generator_ColumnVarNameInTable="columnamountApprove" msprop:Generator_ColumnPropNameInRow="amountApprove" msprop:Generator_ColumnPropNameInTable="amountApproveColumn" msprop:Generator_UserColumnName="amountApprove" type="xs:string" minOccurs="0" />
              <xs:element name="identry" msprop:Generator_ColumnVarNameInTable="columnidentry" msprop:Generator_ColumnPropNameInRow="identry" msprop:Generator_ColumnPropNameInTable="identryColumn" msprop:Generator_UserColumnName="identry" type="xs:string" minOccurs="0" />
              <xs:element name="rvdate" msprop:Generator_ColumnVarNameInTable="columnrvdate" msprop:Generator_ColumnPropNameInRow="rvdate" msprop:Generator_ColumnPropNameInTable="rvdateColumn" msprop:Generator_UserColumnName="rvdate" type="xs:string" minOccurs="0" />
              <xs:element name="pcode" msprop:Generator_ColumnVarNameInTable="columnpcode" msprop:Generator_ColumnPropNameInRow="pcode" msprop:Generator_ColumnPropNameInTable="pcodeColumn" msprop:Generator_UserColumnName="pcode" type="xs:string" minOccurs="0" />
              <xs:element name="pname" msprop:Generator_ColumnVarNameInTable="columnpname" msprop:Generator_ColumnPropNameInRow="pname" msprop:Generator_ColumnPropNameInTable="pnameColumn" msprop:Generator_UserColumnName="pname" type="xs:string" minOccurs="0" />
              <xs:element name="rvdescription" msprop:Generator_ColumnVarNameInTable="columnrvdescription" msprop:Generator_ColumnPropNameInRow="rvdescription" msprop:Generator_ColumnPropNameInTable="rvdescriptionColumn" msprop:Generator_UserColumnName="rvdescription" type="xs:string" minOccurs="0" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:choice>
    </xs:complexType>
    <xs:unique name="Constraint1" msdata:PrimaryKey="true">
      <xs:selector xpath=".//mstns:journal" />
      <xs:field xpath="mstns:idjournal" />
    </xs:unique>
  </xs:element>
</xs:schema>